<project basedir="." default="iphone">
	
	<!--
		This is an ant build file.
		To use:
		1. install ant: http://ant.apache.org
		2. Goto the directory containing this file
		3. Run one of the following commands to run an example
			a) ant iphone
			b) ant android
	-->
	
	<target name="iphone">
		<delete dir="extension/basis/project/obj" failOnError="false" includeEmptyDirs="true"/>
				
		<exec dir="extension/basis/project" failonerror="true" executable="haxelib">
			<arg line="run hxcpp Build.xml -Diphonesim" />
		</exec>

		<exec dir="extension/basis/project" failonerror="true" executable="haxelib">
			<arg line="run hxcpp Build.xml -Diphoneos -DHXCPP_ARMV7" />
		</exec>
	
		<exec dir="extension/basis/project" failonerror="true" executable="haxelib">
			<arg line="run hxcpp Build.xml -Diphoneos" />
		</exec>
		
		<exec dir="examples/basic" failonerror="true" executable="haxelib">
			<arg line="run nme test build.nmml ios -simulator" />
		</exec>
	</target>
	
	
	<target name="android">
		<exec dir="examples/basic" failonerror="true" executable="haxelib">
			<arg line="run nme test build.nmml android_empty" />
		</exec>
	</target>
	
	<target name="androidemu">
		<exec dir="examples/basic" failonerror="true" executable="haxelib">
			<arg line="run nme build build.nmml android_empty" />
		</exec>
		
		<exec dir="." failonerror="false" executable="/opt/android_sdk/platform-tools/adb">
			<arg line="uninstall com.basis.example" />
		</exec>
		
		<exec dir="." failonerror="true" executable="/opt/android_sdk/platform-tools/adb">
			<arg line="install examples/basic/build/android_empty/bin/bin/BasicExample-debug.apk" />
		</exec>
		
		<exec dir="." failonerror="true" executable="/opt/android_sdk/platform-tools/adb">
			<arg line="shell am start -a android.intent.action.MAIN -n com.basis.example/com.basis.example.MainActivity" />
		</exec>
	</target>
</project>